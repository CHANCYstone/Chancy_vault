# 如何在地图上画饼图？

原创 置身数内 数新社 _2024-06-03 18:27_ _重庆_

之前群里有同学在问如何在地图上画饼图？就类似下面这种图：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/09iaSTrvdOGakfDyXibQRya5dTUehHTBvmv9HBpVYmmFYiadicleg470XugtbwlYcyiaXT5K0K4HOF3UMUb0ultDWXg/640?wx_fmt=png&from=appmsg&wxfrom=13)

这种图相较于普通的分级填充地图，能够反映更多的信息。以2022年各省份的水果产量为例，分级填充地图只能够反映每个省水果总产量或者某种水果产量的地理分布图，而使用地理饼图，可以使用这个饼的大小反映总产量的大小，使用饼图的扇形面积反映具体某种水果的产量。

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

今天小数就以这张全国水果产量分布地图为例，给大家介绍如何使用R语言在地图上画饼图。

这张图本质上是地图跟饼图的叠加，底下是常规的地图，上面是常规的 饼图。地图的画法之前已经出过详细的教程了，具体可以参考下面这几篇推文（包括如何获取规范的地图矢量数据以及绘制地图）：

[![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)](http://mp.weixin.qq.com/s?__biz=MzU0OTQ0MzU5Mw==&mid=2247484220&idx=1&sn=7b8876d5d9497ce0615bd03b7a7f8b0a&chksm=fbae825accd90b4ce3863e1790811c2795cdc2e6cae0a5786188855931041637269944fc17cc&scene=21#wechat_redirect)

[![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)](http://mp.weixin.qq.com/s?__biz=MzU0OTQ0MzU5Mw==&mid=2247484049&idx=1&sn=e0ed4e11afe4b7b300f8213117a5e6ce&chksm=fbae83f7ccd90ae1e126ebe584c8d10cc10a16548b157a7cbde228529739108de3581903a367&scene=21#wechat_redirect)

[![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)](http://mp.weixin.qq.com/s?__biz=MzU0OTQ0MzU5Mw==&mid=2247483827&idx=2&sn=16f46a70b4ec73baf2f7aa108acdb50d&chksm=fbae80d5ccd909c37cc9e2703a9dd3ca068e571caef14401a61a798f141a9bedca8e7e376587&scene=21#wechat_redirect)

本篇推文重点讲解饼图的画法以及如何在地图上叠加饼图，有关地图本身的可视化参见上面几篇文章哈~  

这里我们使用geom_arc_bar()函数来画一个饼图:  

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

```
# 导入需要的包
```

按照上面的思路只需要把每个省份放置饼图的经纬度确定出来作为饼图的圆心即可：

```
# 导入相关数据
```

然后再依次画出地图跟饼图即可：

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

```
##作图
```

最后需要在ppt或者AI等图形处理软件中对地图的文字标注以及饼图的位置做一些微调，使得图形更加美观。  

今天的分享就到这里了~咱们下期见~~  

_如果觉得文章对您有用，帮忙各位右下角点个“__**在看**__”，让文章能够帮助到更多的小伙伴，谢谢大家！_

_为了给大家创造一个好的学习环境，我建了个**咨询交流群**。（_群里会不定期**分享**一些可视化的**作图技巧**，并**回答**大家有关数据处理与可视化方面的一些**问题**。_）_

**_如何加入咨询交流群？_****_扫下面的二维码加我的微信，备注写三个自己最常用的R包并且_****_微信发个19.8元红包，备注“加群”即可。_**

**_商务合作：_****_有数据可视化需求的也可直接私我。_**

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

![](https://mmbiz.qlogo.cn/mmbiz_jpg/bBgyzvJNRwWvEgRdhlNNviaUpSEibVumWofYxm5qickm82Go9foPfibYkUTUFHhXfrIZQl5SCnaUE1Pak4CNGe1Biag/0?wx_fmt=jpeg)

置身数内

![赞赏二维码](https://mp.weixin.qq.com/s?__biz=MzU0OTQ0MzU5Mw==&mid=2247484612&idx=1&sn=298861c6a31702ad67cee845194352f7&chksm=fbae85a2ccd90cb4b08a80813135d6bb4dd0714eb7472c3664fdd35c6fef869033712d1c9739&mpshare=1&scene=1&srcid=06032zhqwgcqvAtvheDOlcKt&sharer_shareinfo=003c765578609b3de0bf948e09edd5e2&sharer_shareinfo_first=003c765578609b3de0bf948e09edd5e2&key=6837862ae5d548acaea0c2c375533aa4341a6e84c5d3376d32f36ea9c75735b87f635f162980373553522c673e65f74a4eaacf490f5e45a6c16834b93a802ed8500761aa23aa2876a531d19ff21e3917d7fc8130be371e2aa8439953a304782f0de9b872ccf2bd4c52adca30919454e3ac3dba1a3536790dcaa47091de27b9f0&ascene=1&uin=MTA4NTU3MjEwOA%3D%3D&devicetype=iMac+Mac14%2C2+OSX+OSX+14.4.1+build(23E224)&version=13080811&nettype=WIFI&lang=zh_CN&countrycode=MX&fontScale=100&exportkey=n_ChQIAhIQbA25vXCchJ%2FHt0WeCUCVsxKMAgIE97dBBAEAAAAAAKePJmF%2BYfwAAAAOpnltbLcz9gKNyK89dVj0TriKFQ3ujV%2FgTkT9ZhYxXC9g4x%2FH%2BJMTAR63u99TqAH1dJxuJrXIgrKyRStAoY6Kht48hrWk7KAupsjP6SCZK3Sn0%2BvNl2aJlzdWOHh6fJe2hs6batFfrs2n6jFrag0Zx7Kb6OpFZY3HXBpZRPPzEha3cW5ySmQWSJNQmReZuuAk2C%2BGu8EzRlNI5%2FGFfGJUqLyskPot%2B8QAvnI4oEozID7C%2FpCkMHFHCmTxi8Qv7jeTZE73sopg5D5%2F%2FuFGCgWD13bFXJ524ZZ92hx87rP9pLJY%2BsNFsBkXEF4m%2FG1I5NA0gmcQz50%3D&acctmode=0&pass_ticket=H7P6zRNZIJmj%2Fq4IbFaIepRHoFFQMOHS5tZ2NAj6qWFMqoDjbpKXGdpSDxCAmdEk&wx_header=0&fasttmpl_type=0&fasttmpl_fullversion=7234854-zh_CN-zip&fasttmpl_flag=0)喜欢作者

#R语言地理可视化4

#R语言地理可视化 · 目录

上一篇R语言轻松搞定的研究区概况图教程来啦！

阅读 674

5

11

​

写下你的留言

**2条留言**

- 俊骐
    
    江苏昨天
    
    赞
    
    大佬，你好，这个作品真的很帅呢。我是公众号DataCharm号主，最近也在做这种可视化作品，有机会可以合作下吗？![[握手]](https://res.wx.qq.com/mpres/zh_CN/htmledition/comm_htmledition/images/pic/common/pic_blank.gif)![[握手]](https://res.wx.qq.com/mpres/zh_CN/htmledition/comm_htmledition/images/pic/common/pic_blank.gif)
    
    1条回复
    

已无更多数据

[](javacript:;)

复制搜一搜分享收藏划线

人划线